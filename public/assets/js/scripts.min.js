<<<<<<< HEAD
(()=>{var B=Object.defineProperty;var ce=Object.getOwnPropertyDescriptor;var de=Object.getOwnPropertyNames;var le=Object.prototype.hasOwnProperty;var ue=(n,o)=>()=>(n&&(o=n(n=0)),o);var d=(n,o)=>()=>(o||n((o={exports:{}}).exports,o),o.exports),me=(n,o)=>{for(var r in o)B(n,r,{get:o[r],enumerable:!0})},pe=(n,o,r,s)=>{if(o&&typeof o=="object"||typeof o=="function")for(let i of de(o))!le.call(n,i)&&i!==r&&B(n,i,{get:()=>o[i],enumerable:!(s=ce(o,i))||s.enumerable});return n};var w=n=>pe(B({},"__esModule",{value:!0}),n);var y={};me(y,{toast:()=>fe});function fe(n,o){D||(D=document.createElement("div"),D.classList.add("toastContain"),document.body.appendChild(D));let r=document.createElement("div");r.classList.add("toast",o),r.innerText=n,D.prepend(r),setTimeout(()=>r.classList.add("open"),10),setTimeout(()=>r.classList.remove("open"),3e3),setTimeout(()=>D.removeChild(r),3500)}var D,h=ue(()=>{});var H=d(()=>{if(document.getElementById("copy-to-clipboard")&&window.location.pathname==="/"){let n=document.getElementById("copy-to-clipboard"),o=document.querySelector("code");n.addEventListener("click",()=>{o.setAttribute("style","color: #1581e6"),navigator.clipboard.writeText(o.innerText),o.innerText="Copied!",setTimeout(()=>o.removeAttribute("style"),2e3),setTimeout(()=>o.innerText="https://api.webdev-hq.com/common/v1/info",2e3)})}});var _=d(()=>{var I=(h(),w(y));window.location.pathname==="/profile"&&(document.addEventListener("DOMContentLoaded",function(){let n=document.querySelectorAll("[data-tab]"),o=document.querySelectorAll("[data-content]");n.forEach(r=>{r.addEventListener("click",()=>{n.forEach(i=>i.classList.remove("border-b-2","border-blue-500","text-mantis-primary")),o.forEach(i=>i.classList.add("hidden")),r.classList.add("border-b-2","border-mantis-primary","text-mantis-primary");let s=r.getAttribute("data-tab");document.querySelector(`[data-content="${s}"]`).classList.remove("hidden")})}),n[0].click()}),document.getElementsByTagName("form")[0].addEventListener("submit",n=>{n.preventDefault(),ye(n)}));var ye=async n=>{n.preventDefault();let o=n.target,r=new FormData(o),s=Object.fromEntries(r);console.log(s);try{(await fetch(`/common/v1/users/${s.id}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)})).ok?I("Account updated.","success"):I("Update failed.","error")}catch(i){I("Something went wrong.","error"),console.error(i)}}});var W=d(()=>{document.addEventListener("DOMContentLoaded",()=>{let n=document.getElementsByClassName("dropdown-btn"),o=document.getElementsByClassName("dropdown-menu");for(let r=0;r<n.length;r++)n[r].addEventListener("click",s=>{s.stopPropagation(),o[r].classList.toggle("hidden");let i=n[r].getAttribute("aria-expanded")==="true";n[r].setAttribute("aria-expanded",String(!i))});document.addEventListener("click",()=>{for(let r=0;r<o.length;r++)o[r].classList.contains("hidden")||(o[r].classList.add("hidden"),n[r].setAttribute("aria-expanded","false"))})})});var Y=d(()=>{var{toast:C}=(h(),w(y));window.location.pathname==="/newsletter"&&document.addEventListener("DOMContentLoaded",()=>{document.getElementsByTagName("form")[0].addEventListener("submit",n=>{he(n)})});if(window.location.pathname==="/newsletter-confirm"){let n=new URLSearchParams(window.location.search);if(n.get("token")){let o=n.get("token");fetch("/common/v1/newsletter/confirm",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:o})})}}var he=async n=>{n.preventDefault();let o=document.querySelector("input[name='name']").value,r=document.querySelector("input[name='email']").value,s=document.querySelector("input[name='agreed-to-subscription']").checked;if(!o||!r||!s){C("Please fill out all fields.","error"),document.querySelector("input[name='name']").focus();return}let i={name:o,email:r,agreedToSubscription:s};try{await fetch("/common/v1/newsletter/subscribe",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}).then(c=>{c.status===409&&C("E-mail is already subscribed.","error"),c.ok?(document.querySelector("input[name='name']").value="",document.querySelector("input[name='email']").value="",document.querySelector("input[name='agreed-to-subscription']").checked=!1,C("Subscribtion successful.","success")):C("Subscribtion failed.","error")})}catch(c){console.log(c)}}});var V=d(()=>{var{toast:P}=(h(),w(y));if(window.location.pathname==="/auth/register"){document.addEventListener("DOMContentLoaded",()=>{document.getElementsByTagName("form")[0].addEventListener("submit",o=>{n(o)})});let n=async o=>{o.preventDefault();let r=document.querySelector("input[name='username']").value,s=document.querySelector("input[name='email']").value,i=document.querySelector("input[name='password']").value,c=document.querySelector("input[name='password-repeat']").value,b=document.querySelector("input[name='agreed-to-terms']").checked;if(!r||!s||!i||!c||!b){P("Please fill out all fields.","error");return}if(i!==c){P("Passwords do not match.","error");return}let S={username:r,email:s,password:i,passwordRepeat:c,agreedToTerms:b};try{let f=await fetch("/common/v1/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(S)}),L=await f.json();if(!f.ok){let k=L.message||"An unknown error occurred.";P(k,"error");return}P("Please confirm your e-mail.","success"),document.querySelector("input[name='username']").value="",document.querySelector("input[name='email']").value="",document.querySelector("input[name='password']").value="",document.querySelector("input[name='password-repeat']").value="",document.querySelector("input[name='agreed-to-terms']").checked=!1}catch(f){console.error("Fetch error:",f),P("Network error or unhandled exception.")}}}});var z=d(()=>{window.location.pathname==="/auth/confirm"&&document.addEventListener("DOMContentLoaded",()=>{ge()});async function ge(){let n=document.getElementById("message-box");n.classList.remove("hidden"),n.classList.add("border-sky-500","bg-sky-100","text-sky-700"),n.innerHTML="Verifying token...";let o=window.location.search.split("=")[1],r=await fetch("/common/v1/auth/confirm?token="+o,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:o})}),s=await r.json();r.ok?(n.classList.remove("border-sky-500","bg-sky-100","text-sky-700"),n.classList.add("border-green-500","bg-green-100","text-green-700"),n.innerHTML=s.message,setTimeout(()=>{window.location.href="/auth/login"},3500)):(n.classList.remove("hidden"),n.classList.add("border-rose-500","bg-rose-100","text-rose-700"),n.innerHTML=s.message)}});var G=d(()=>{var{toast:O}=(h(),w(y));window.location.pathname==="/auth/login"&&document.addEventListener("DOMContentLoaded",()=>{document.getElementsByTagName("form")[0].addEventListener("submit",n=>{ve(n)})});var ve=async n=>{n.preventDefault();let o=document.querySelector("input[name='email']").value,r=document.querySelector("input[name='password']").value;if(!o||!r){O("Please fill out all fields.","error"),document.querySelector("input[name='email']").focus();return}let s={email:o,password:r};try{let i=await fetch("/common/v1/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}),c=await i.json();i.ok?(localStorage.setItem("token",c.token),O("Login successful.","success"),document.querySelector("input[name='email']").value="",document.querySelector("input[name='password']").value="",setTimeout(()=>window.location.href="/",1500)):(O(c.message||"Login failed.","error"),document.querySelector("input[name='email']").focus())}catch(i){console.log(i)}}});var K=d(()=>{(window.location.pathname===localStorage.getItem("token")||window.location.pathname!=="/newsletter"||window.location.pathname!=="/auth/confirm")&&document.addEventListener("DOMContentLoaded",()=>{document.getElementById("logout-btn")&&document.getElementById("logout-btn").addEventListener("click",o=>{o.stopPropagation(),fetch("/common/v1/auth/logout",{method:"POST"}).then(r=>{r.ok&&(window.location.href="/")})})})});var Q=d(()=>{var{toast:x}=(h(),w(y));window.location.pathname==="/auth/reset-password"&&document.addEventListener("DOMContentLoaded",()=>{document.getElementsByTagName("form")[0].addEventListener("submit",n=>{we(n)})});var we=async n=>{n.preventDefault();let o=n.target,r=document.querySelector("input[name='email']").value;if(!r){x("Please fill out all fields.","error");return}let s={email:r};try{(await fetch("/common/v1/auth/reset-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)})).ok?(document.querySelector("input[name='email']").value="",x("Password reset email sent.","success")):x("Password reset failed.","error")}catch(i){x("Something went wrong.","error"),console.log(i)}}});var Z=d(()=>{var{toast:l}=(h(),w(y)),A=!1,N=null,X="/posts";document.addEventListener("DOMContentLoaded",()=>{if(window.location.pathname!=="/posts"&&window.location.pathname!=="/posts/create")return;let n=document.getElementById("post-form"),o=document.getElementsByClassName("edit-post-btn"),r=document.getElementsByClassName("delete-post-btn"),s=document.getElementById("create-post-btn-text"),i=document.getElementById("update-post-btn-text"),c=document.getElementById("modal");n.addEventListener("submit",e=>{e.preventDefault(),A?L():S()}),Array.from(o).forEach(e=>{e.addEventListener("click",t=>{t.stopPropagation();let a=e.getAttribute("data-post-id");f(a)})}),Array.from(r).forEach(e=>{e.addEventListener("click",t=>{t.stopPropagation();let a=e.getAttribute("data-post-id");k(a)})});function b(){A=!1,N=null,s.classList.remove("hidden"),i.classList.add("hidden")}async function S(){let e=g();if(v(e))try{(await fetch("/common/v1/posts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).ok?(l("Post created.","success"),setTimeout(()=>{window.location.href=X},1500)):l("Post creation failed.","error")}catch(t){l("Something went wrong.","error"),console.error(t)}}async function f(e){if(!e){l("Post ID is missing.","error");return}A=!0,N=e,s.classList.add("hidden"),i.classList.remove("hidden"),c.classList.remove("hidden"),c.classList.add("flex");try{let t=await fetch(`/common/v1/posts/${e}`),a=await t.json();if(!t.ok){l("Post not found.","error");return}E(a)}catch(t){console.error("Something went wrong:",t),l("Something went wrong.","error")}}async function L(){let e=g();if(e.id=N,!!v(e))try{let t=await fetch(`/common/v1/posts/${e.id}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(t.ok)l("Post updated.","success"),window.location.href=X;else{let a=await t.json();console.log(a),l("Update failed.","error")}}catch(t){l("Something went wrong.","error"),console.error(t)}}async function k(e){try{if((await fetch(`/common/v1/posts/${e}`,{method:"DELETE",headers:{"Content-Type":"application/json"}})).ok){let a=document.querySelector(`#post-${e}`);a.classList.add("border-rose-500"),a.remove(),l("Post deleted.","success")}else l("Post deletion failed.","error")}catch(t){l("Something went wrong.","error"),console.error(t)}}function g(){return{title:document.querySelector("input[name='title']").value.trim(),description:document.querySelector("textarea[name='description']").value.trim(),slug:document.querySelector("input[name='slug']").value.trim(),content:document.querySelector("textarea[name='content']").value.trim(),status:document.querySelector("select[name='post-status']").value.trim(),userId:document.querySelector("input[name='user-id']").value.trim()}}function E(e){document.querySelector("input[name='user-id']").value=e.userId||"",document.querySelector("input[name='title']").value=e.title||"",document.querySelector("textarea[name='description']").value=e.description||"",document.querySelector("select[name='post-status']").value=e.status||"",document.querySelector("input[name='slug']").value=e.slug||"",document.querySelector("textarea[name='content']").value=e.content||""}function v({title:e,description:t,content:a,slug:q,status:T}){return!e||!t||!a||!q||!T?(l("Please fill out all required fields.","error"),!1):!0}})});var te=d(()=>{var{toast:u}=(h(),w(y)),j=!1,U=null,ee="/links";window.location.pathname==="/links"&&document.addEventListener("DOMContentLoaded",()=>{let n=document.getElementById("link-form"),o=document.getElementsByClassName("edit-link-btn"),r=document.getElementsByClassName("delete-link-btn"),s=document.getElementById("create-link-btn-text"),i=document.getElementById("update-link-btn-text"),c=document.getElementById("modal");n.addEventListener("submit",e=>{e.preventDefault(),j?L():S()}),Array.from(o).forEach(e=>{e.addEventListener("click",t=>{t.stopPropagation();let a=e.getAttribute("data-link-id");f(a)})}),Array.from(r).forEach(e=>{e.addEventListener("click",t=>{t.stopPropagation();let a=e.getAttribute("data-link-id");k(a)})});function b(){j=!1,U=null,s.classList.remove("hidden"),i.classList.add("hidden")}async function S(){let e=g();if(v(e))try{let t=await fetch("/common/v1/links",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});t.ok?(u("Link created.","success"),window.location.href=ee):u(t.statusText,"error")}catch(t){u("Something went wrong.","error"),console.error(t)}}async function f(e){if(!e){u("Link ID is missing.","error");return}j=!0,U=e,s.classList.add("hidden"),i.classList.remove("hidden"),c.classList.remove("hidden"),c.classList.add("flex");try{let t=await fetch(`/common/v1/links/${e}`),a=await t.json();if(!t.ok){u("Link not found.","error");return}E(a)}catch(t){console.error("Something went wrong:",t),u("Something went wrong.","error")}}async function L(){let e=g();if(e.id=U,!!v(e))try{(await fetch(`/common/v1/links/${e.id}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).ok?(u("Link updated.","success"),window.location.href=ee):u("Link update failed.","error")}catch(t){u("Something went wrong.","error"),console.error(t)}}async function k(e){try{(await fetch(`/common/v1/links/${e}`,{method:"DELETE",headers:{"Content-Type":"application/json"}})).ok?(document.querySelector(`#link-${e}`).remove(),u("Link deleted.","success")):u("Deletion failed.","error")}catch(t){u("Something went wrong.","error"),console.error(t)}}function g(){return{userId:document.querySelector("input[name='user-id']").value.trim(),id:document.querySelector("input[name='id']").value.trim(),title:document.querySelector("input[name='title']").value.trim(),url:document.querySelector("input[name='url']").value.trim(),description:document.querySelector("textarea[name='description']").value.trim(),isPublic:document.querySelector("input[name='is-public']").checked}}function E(e){document.querySelector("input[name='user-id']").value=e.userId||"",document.querySelector("input[name='id']").value=e.id||"",document.querySelector("input[name='title']").value=e.title||"",document.querySelector("input[name='url']").value=e.url||"",document.querySelector("textarea[name='description']").value=e.description||"",document.querySelector("input[name='is-public']").checked=!!e.isPublic||!1}function v({title:e,url:t,description:a,userId:q}){return!e||!t||!a||!q?(u("Please fill out all required fields.","error"),!1):!0}})});var ne=d(()=>{document.addEventListener("DOMContentLoaded",function(){let n=document.getElementById("modal"),o=document.getElementsByClassName("modal-close"),r=document.getElementsByClassName("modal-open");Array.from(o).forEach(s=>{s.addEventListener("click",()=>{n.classList.add("hidden"),n.classList.remove("flex")})}),Array.from(r).forEach(s=>{s.addEventListener("click",()=>{n.classList.add("flex"),n.classList.remove("hidden")})}),n.addEventListener("click",s=>{s.target===n&&(n.classList.add("hidden"),n.classList.remove("flex"))})})});var oe=d(()=>{var{toast:M}=(h(),w(y));window.location.pathname==="/admin/users"&&document.addEventListener("DOMContentLoaded",function(){let n=document.getElementsByClassName("delete-user-btn");Array.from(n).forEach(o=>{o.addEventListener("click",r=>{r.stopPropagation();let s=o.getAttribute("data-user-id");Se(s)})})});async function Se(n){try{if((await fetch(`/common/v1/users/${n}`,{method:"DELETE",headers:{"Content-Type":"application/json"}})).ok){let r=document.querySelector(`#user-${n}`);r.classList.add("border-rose-500"),r.remove(),M("User deleted.","success")}else M("Deletion failed.","error")}catch{M("Something went wrong.","error")}}});var se=d(()=>{var{toast:m}=(h(),w(y)),F=!1,$=null,re="/admin/posts";document.addEventListener("DOMContentLoaded",()=>{if(window.location.pathname!=="/admin/posts"&&window.location.pathname!=="/admin/posts/create")return;let n=document.getElementById("post-form"),o=document.getElementsByClassName("edit-post-btn"),r=document.getElementsByClassName("delete-post-btn"),s=document.getElementById("create-post-btn-text"),i=document.getElementById("update-post-btn-text"),c=document.getElementById("modal");n.addEventListener("submit",e=>{e.preventDefault(),F?L():S(),S()}),Array.from(o).forEach(e=>{e.addEventListener("click",t=>{t.stopPropagation();let a=e.getAttribute("data-post-id");f(a)})}),Array.from(r).forEach(e=>{e.addEventListener("click",t=>{t.stopPropagation();let a=e.getAttribute("data-post-id");k(a)})});function b(){F=!1,$=null,s.classList.remove("hidden"),i.classList.add("hidden")}async function S(){let e=g();if(v(e))try{(await fetch("/common/v1/posts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).ok?(m("Post created.","success"),setTimeout(()=>{window.location.href=re},1500)):m("Post creation failed.","error")}catch(t){m("Something went wrong.","error"),console.error(t)}}async function f(e){if(!e){m("Post ID is missing.","error");return}F=!0,$=e,s.classList.add("hidden"),i.classList.remove("hidden"),c.classList.remove("hidden"),c.classList.add("flex");try{let t=await fetch(`/common/v1/posts/${e}`),a=await t.json();if(!t.ok){m("Post not found.","error");return}E(a)}catch(t){console.error("Something went wrong:",t),m("Something went wrong.","error")}}async function L(){let e=g();if(e.id=$,!!v(e))try{let t=await fetch(`/common/v1/posts/${e.id}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(t.ok)m("Post updated.","success"),window.location.href=re;else{let a=await t.json();console.log(a),m("Update failed.","error")}}catch(t){m("Something went wrong.","error"),console.error(t)}}async function k(e){try{if((await fetch(`/common/v1/posts/${e}`,{method:"DELETE",headers:{"Content-Type":"application/json"}})).ok){let a=document.querySelector(`#post-${e}`);a.classList.add("border-rose-500"),a.remove(),m("Post deleted.","success")}else m("Post deletion failed.","error")}catch(t){m("Something went wrong.","error"),console.error(t)}}function g(){return{title:document.querySelector("input[name='title']").value.trim(),description:document.querySelector("textarea[name='description']").value.trim(),slug:document.querySelector("input[name='slug']").value.trim(),content:document.querySelector("textarea[name='content']").value.trim(),status:document.querySelector("select[name='post-status']").value.trim(),userId:document.querySelector("input[name='user-id']").value.trim()}}function E(e){document.querySelector("input[name='user-id']").value=e.userId||"",document.querySelector("input[name='title']").value=e.title||"",document.querySelector("textarea[name='description']").value=e.description||"",document.querySelector("select[name='post-status']").value=e.status||"",document.querySelector("input[name='slug']").value=e.slug||"",document.querySelector("textarea[name='content']").value=e.content||""}function v({title:e,description:t,content:a,slug:q,status:T}){return!e||!t||!a||!q||!T?(m("Please fill out all required fields.","error"),!1):!0}})});var ie=d(()=>{var{toast:p}=(h(),w(y)),J=!1,R=null,ae="/admin/links";window.location.pathname==="/admin/links"&&document.addEventListener("DOMContentLoaded",()=>{let n=document.getElementById("link-form"),o=document.getElementsByClassName("edit-link-btn"),r=document.getElementsByClassName("delete-link-btn"),s=document.getElementById("create-link-btn-text"),i=document.getElementById("update-link-btn-text"),c=document.getElementById("modal");n.addEventListener("submit",e=>{e.preventDefault(),J?L():S()}),Array.from(o).forEach(e=>{e.addEventListener("click",t=>{t.stopPropagation();let a=e.getAttribute("data-link-id");f(a)})}),Array.from(r).forEach(e=>{e.addEventListener("click",t=>{t.stopPropagation();let a=e.getAttribute("data-link-id");k(a)})});function b(){J=!1,R=null,s.classList.remove("hidden"),i.classList.add("hidden")}async function S(){let e=g();if(v(e))try{let t=await fetch("/common/v1/links",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});t.ok?(p("Link created.","success"),window.location.href=ae):p(t.statusText,"error")}catch(t){p("Something went wrong.","error"),console.error(t)}}async function f(e){if(!e){p("Link ID is missing.","error");return}J=!0,R=e,s.classList.add("hidden"),i.classList.remove("hidden"),c.classList.remove("hidden"),c.classList.add("flex");try{let t=await fetch(`/common/v1/links/${e}`),a=await t.json();if(!t.ok){p("Link not found.","error");return}E(a)}catch(t){console.error("Something went wrong:",t),p("Something went wrong.","error")}}async function L(){let e=g();if(e.id=R,!!v(e))try{(await fetch(`/common/v1/links/${e.id}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).ok?(p("Link updated.","success"),window.location.href=ae):p("Link update failed.","error")}catch(t){p("Something went wrong.","error"),console.error(t)}}async function k(e){try{(await fetch(`/common/v1/links/${e}`,{method:"DELETE",headers:{"Content-Type":"application/json"}})).ok?(document.querySelector(`#link-${e}`).remove(),p("Link deleted.","success")):p("Deletion failed.","error")}catch(t){p("Something went wrong.","error"),console.error(t)}}function g(){return{userId:document.querySelector("input[name='user-id']").value.trim(),id:document.querySelector("input[name='id']").value.trim(),title:document.querySelector("input[name='title']").value.trim(),url:document.querySelector("input[name='url']").value.trim(),description:document.querySelector("textarea[name='description']").value.trim(),isPublic:document.querySelector("input[name='is-public']").checked}}function E(e){document.querySelector("input[name='user-id']").value=e.userId||"",document.querySelector("input[name='id']").value=e.id||"",document.querySelector("input[name='title']").value=e.title||"",document.querySelector("input[name='url']").value=e.url||"",document.querySelector("textarea[name='description']").value=e.description||"",document.querySelector("input[name='is-public']").checked=!!e.isPublic||!1}function v({title:e,url:t,description:a,isPublic:q,userId:T}){return!e||!t||!a||q===void 0||!T?(p("Please fill out all required fields.","error"),!1):!0}})});h();H();_();W();Y();V();z();G();K();Q();Z();te();ne();oe();se();ie();})();
=======
(()=>{var D=Object.defineProperty;var V=Object.getOwnPropertyDescriptor;var X=Object.getOwnPropertyNames;var Z=Object.prototype.hasOwnProperty;var ee=(e,t)=>()=>(e&&(t=e(e=0)),t);var d=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),te=(e,t)=>{for(var o in t)D(e,o,{get:t[o],enumerable:!0})},ne=(e,t,o,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of X(t))!Z.call(e,s)&&s!==o&&D(e,s,{get:()=>t[s],enumerable:!(r=V(t,s))||r.enumerable});return e};var f=e=>ne(D({},"__esModule",{value:!0}),e);var N=d(()=>{if(window.location.pathname==="/"){let e=document.getElementById("copy-to-clipboard"),t=document.querySelector("code");e.addEventListener("click",()=>{t.setAttribute("style","color: #1581e6"),navigator.clipboard.writeText(t.innerText),t.innerText="Copied!",setTimeout(()=>t.removeAttribute("style"),2e3),setTimeout(()=>t.innerText="https://api.webdev-hq.com/common/v1",2e3)})}});var m={};te(m,{toast:()=>oe});function oe(e,t){g||(g=document.createElement("div"),g.classList.add("toastContain"),document.body.appendChild(g));let o=document.createElement("div");o.classList.add("toast",t),o.innerText=e,g.prepend(o),setTimeout(()=>o.classList.add("open"),10),setTimeout(()=>o.classList.remove("open"),3e3),setTimeout(()=>g.removeChild(o),3500)}var g,p=ee(()=>{});var j=d(()=>{var C=(p(),f(m));window.location.pathname==="/account"&&(document.addEventListener("DOMContentLoaded",function(){let e=document.querySelectorAll("[data-tab]"),t=document.querySelectorAll("[data-content]");e.forEach(o=>{o.addEventListener("click",()=>{e.forEach(s=>s.classList.remove("border-b-2","border-blue-500","text-mantis-primary")),t.forEach(s=>s.classList.add("hidden")),o.classList.add("border-b-2","border-mantis-primary","text-mantis-primary");let r=o.getAttribute("data-tab");document.querySelector(`[data-content="${r}"]`).classList.remove("hidden")})}),e[0].click()}),document.getElementsByTagName("form")[0].addEventListener("submit",e=>{e.preventDefault(),re(e)}));var re=async e=>{e.preventDefault();let t=e.target,o=new FormData(t),r=Object.fromEntries(o);console.log(r);try{(await fetch(`/common/v1/users/${r.id}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)})).ok?C("Account updated.","success"):C("Update failed.","error")}catch(s){C("Something went wrong.","error"),console.error(s)}}});var I=d(()=>{document.addEventListener("DOMContentLoaded",()=>{let e=document.getElementsByClassName("dropdown-btn"),t=document.getElementsByClassName("dropdown-menu");for(let o=0;o<e.length;o++)e[o].addEventListener("click",r=>{r.stopPropagation(),t[o].classList.toggle("hidden");let s=e[o].getAttribute("aria-expanded")==="true";e[o].setAttribute("aria-expanded",String(!s))});document.addEventListener("click",()=>{for(let o=0;o<t.length;o++)t[o].classList.contains("hidden")||(t[o].classList.add("hidden"),e[o].setAttribute("aria-expanded","false"))})})});var M=d(()=>{var{toast:b}=(p(),f(m));window.location.pathname==="/newsletter"&&document.addEventListener("DOMContentLoaded",()=>{document.getElementsByTagName("form")[0].addEventListener("submit",e=>{ae(e)})});if(window.location.pathname==="/newsletter-confirm"){let e=new URLSearchParams(window.location.search);if(e.get("token")){let t=e.get("token");fetch("/common/v1/newsletter/confirm",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:t})})}}var ae=async e=>{e.preventDefault();let t=document.querySelector("input[name='name']").value,o=document.querySelector("input[name='email']").value,r=document.querySelector("input[name='agreed-to-subscription']").checked;if(!t||!o||!r){b("Please fill out all fields.","error"),document.querySelector("input[name='name']").focus();return}let s={name:t,email:o,agreedToSubscription:r};try{await fetch("/common/v1/newsletter/subscribe",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}).then(c=>{c.status===409&&b("E-mail is already subscribed.","error"),c.ok?(document.querySelector("input[name='name']").value="",document.querySelector("input[name='email']").value="",document.querySelector("input[name='agreed-to-subscription']").checked=!1,b("Subscribtion successful.","success")):b("Subscribtion failed.","error")})}catch(c){console.log(c)}}});var U=d(()=>{var{toast:y}=(p(),f(m));if(window.location.pathname==="/auth/register"){document.addEventListener("DOMContentLoaded",()=>{document.getElementsByTagName("form")[0].addEventListener("submit",t=>{e(t)})});let e=async t=>{t.preventDefault();let o=document.querySelector("input[name='username']").value,r=document.querySelector("input[name='email']").value,s=document.querySelector("input[name='password']").value,c=document.querySelector("input[name='password-repeat']").value,k=document.querySelector("input[name='agreed-to-terms']").checked;if(!o||!r||!s||!c||!k){y("Please fill out all fields.","error");return}if(s!==c){y("Passwords do not match.","error");return}let w={username:o,email:r,password:s,passwordRepeat:c,agreedToTerms:k};try{let h=await fetch("/common/v1/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(w)}),v=await h.json();if(!h.ok){let L=v.message||"An unknown error occurred.";y(L,"error");return}y("Please confirm your e-mail.","success"),document.querySelector("input[name='username']").value="",document.querySelector("input[name='email']").value="",document.querySelector("input[name='password']").value="",document.querySelector("input[name='password-repeat']").value="",document.querySelector("input[name='agreed-to-terms']").checked=!1}catch(h){console.error("Fetch error:",h),y("Network error or unhandled exception.")}}}window.location.pathname==="/auth/confirm"&&document.addEventListener("DOMContentLoaded",()=>{let t=new URLSearchParams(window.location.search).get("token"),o=document.getElementById("message-box");t?fetch("/common/v1/auth/confirm?token="+encodeURIComponent(t),{method:"GET",headers:{"Content-Type":"application/json"}}).then(r=>r.json()).then(r=>{y(r.message,"Account has been verified."),o.innerHTML=r.message}).catch(r=>{console.error("Error confirming email:",r),y("Something went wrong.","error")}):y("Token missing.","error")})});var R=d(()=>{var{toast:$}=(p(),f(m));window.location.pathname==="/auth/confirm"&&document.addEventListener("DOMContentLoaded",()=>{let e=window.location.search.split("=")[1];e&&fetch("/common/v1/auth/confirm?token="+e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:e})}).then(t=>t.json()).then(t=>{t.message?$(t.message,"success"):$("Something went wrong.","error")}).catch(t=>{console.error("Error fetching links:",t)})})});var F=d(()=>{var{toast:P}=(p(),f(m));window.location.pathname==="/auth/login"&&document.addEventListener("DOMContentLoaded",()=>{document.getElementsByTagName("form")[0].addEventListener("submit",e=>{se(e)})});var se=async e=>{e.preventDefault();let t=document.querySelector("input[name='email']").value,o=document.querySelector("input[name='password']").value;if(!t||!o){P("Please fill out all fields.","error"),document.querySelector("input[name='email']").focus();return}let r={email:t,password:o};try{let s=await fetch("/common/v1/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}),c=await s.json();s.ok?(localStorage.setItem("token",c.token),P("Login successful.","success"),document.querySelector("input[name='email']").value="",document.querySelector("input[name='password']").value="",setTimeout(()=>window.location.href="/",1500)):(P(c.message||"Login failed.","error"),document.querySelector("input[name='email']").focus())}catch(s){console.log(s)}}});var J=d(()=>{(window.location.pathname===localStorage.getItem("token")||window.location.pathname!=="/newsletter"||window.location.pathname!=="/auth/confirm")&&document.addEventListener("DOMContentLoaded",()=>{document.getElementById("logout-btn")&&document.getElementById("logout-btn").addEventListener("click",t=>{t.stopPropagation(),fetch("/common/v1/auth/logout",{method:"POST"}).then(o=>{o.ok&&(window.location.href="/")})})})});var H=d(()=>{var{toast:q}=(p(),f(m));window.location.pathname==="/auth/reset-password"&&document.addEventListener("DOMContentLoaded",()=>{document.getElementsByTagName("form")[0].addEventListener("submit",e=>{ie(e)})});var ie=async e=>{e.preventDefault();let t=e.target,o=document.querySelector("input[name='email']").value;if(!o){q("Please fill out all fields.","error");return}let r={email:o};try{(await fetch("/common/v1/auth/reset-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)})).ok?(document.querySelector("input[name='email']").value="",q("Password reset email sent.","success")):q("Password reset failed.","error")}catch(s){q("Something went wrong.","error"),console.log(s)}}});var _=d(()=>{var{toast:l}=(p(),f(m)),B=!1,O=null;document.addEventListener("DOMContentLoaded",()=>{if(window.location.pathname!=="/links")return;let e=document.getElementById("link-form"),t=document.getElementsByClassName("edit-link-btn"),o=document.getElementsByClassName("delete-link-btn"),r=document.getElementById("create-link-btn-text"),s=document.getElementById("update-link-btn-text"),c=document.getElementById("modal");e.addEventListener("submit",n=>{n.preventDefault(),B?v():w()}),Array.from(t).forEach(n=>{n.addEventListener("click",a=>{a.stopPropagation();let i=n.getAttribute("data-link-id");h(i)})}),Array.from(o).forEach(n=>{n.addEventListener("click",a=>{a.stopPropagation();let i=n.getAttribute("data-link-id");L(i)})});function k(){B=!1,O=null,r.classList.remove("hidden"),s.classList.add("hidden")}async function w(){let n=S();if(E(n))try{(await fetch("/common/v1/links",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)})).ok?(l("Link created.","success"),window.location.href="/links"):l("Link creation failed.","error")}catch(a){l("Something went wrong.","error"),console.error(a)}}async function h(n){if(!n){l("Link ID is missing.","error");return}B=!0,O=n,r.classList.add("hidden"),s.classList.remove("hidden"),c.classList.remove("hidden"),c.classList.add("flex");try{let a=await fetch(`/common/v1/links/${n}`),i=await a.json();if(!a.ok){l("Link not found.","error");return}T(i)}catch(a){console.error("Something went wrong:",a),l("Something went wrong.","error")}}async function v(){let n=S();if(n.id=O,!!E(n))try{(await fetch(`/common/v1/links/${n.id}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)})).ok?(l("Link updated.","success"),window.location.href="/links"):l("Update failed.","error")}catch(a){l("Something went wrong.","error"),console.error(a)}}async function L(n){try{(await fetch(`/common/v1/links/${n}`,{method:"DELETE",headers:{"Content-Type":"application/json"}})).ok?(document.querySelector(`#link-${n}`).remove(),l("Link deleted.","success")):l("Deletion failed.","error")}catch(a){l("Something went wrong.","error"),console.error(a)}}function S(){return{title:document.querySelector("input[name='title']").value.trim(),url:document.querySelector("input[name='url']").value.trim(),description:document.querySelector("textarea[name='description']").value.trim(),isPublic:document.querySelector("input[name='is-public']").checked}}function T(n){document.querySelector("input[name='title']").value=n.title||"",document.querySelector("input[name='url']").value=n.url||"",document.querySelector("textarea[name='description']").value=n.description||"",document.querySelector("input[name='is-public']").checked=!!n.isPublic}function E({title:n,url:a,description:i}){return!n||!a||!i?(l("Please fill out all required fields.","error"),!1):!0}})});var G=d(()=>{var{toast:u}=(p(),f(m)),x=!1,A=null;document.addEventListener("DOMContentLoaded",()=>{if(window.location.pathname!=="/posts"&&window.location.pathname!=="/posts/create")return;let e=document.getElementById("post-form"),t=document.getElementsByClassName("edit-post-btn"),o=document.getElementsByClassName("delete-post-btn"),r=document.getElementById("create-post-btn-text"),s=document.getElementById("update-post-btn-text"),c=document.getElementById("modal");e.addEventListener("submit",n=>{n.preventDefault(),x?v():w()}),Array.from(t).forEach(n=>{n.addEventListener("click",a=>{a.stopPropagation();let i=n.getAttribute("data-post-id");h(i)})}),Array.from(o).forEach(n=>{n.addEventListener("click",a=>{a.stopPropagation();let i=n.getAttribute("data-post-id");L(i)})});function k(){x=!1,A=null,r.classList.remove("hidden"),s.classList.add("hidden")}async function w(){let n=S();if(E(n))try{(await fetch("/common/v1/posts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)})).ok?(u("Post created.","success"),setTimeout(()=>{window.location.href="/posts"},1500)):u("Post creation failed.","error")}catch(a){u("Something went wrong.","error"),console.error(a)}}async function h(n){if(!n){u("Post ID is missing.","error");return}x=!0,A=n,r.classList.add("hidden"),s.classList.remove("hidden"),c.classList.remove("hidden"),c.classList.add("flex");try{let a=await fetch(`/common/v1/posts/${n}`),i=await a.json();if(!a.ok){u("Post not found.","error");return}T(i)}catch(a){console.error("Something went wrong:",a),u("Something went wrong.","error")}}async function v(){let n=S();if(n.id=A,!!E(n))try{let a=await fetch(`/common/v1/posts/${n.id}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(a.ok)u("Post updated.","success"),window.location.href="/posts";else{let i=await a.json();console.log(i),u("Update failed.","error")}}catch(a){u("Something went wrong.","error"),console.error(a)}}async function L(n){try{if((await fetch(`/common/v1/posts/${n}`,{method:"DELETE",headers:{"Content-Type":"application/json"}})).ok){let i=document.querySelector(`#post-${n}`);i.classList.add("border-rose-500"),i.remove(),u("Post deleted.","success")}else u("Deletion failed.","error")}catch(a){u("Something went wrong.","error"),console.error(a)}}function S(){return{title:document.querySelector("input[name='title']").value.trim(),description:document.querySelector("textarea[name='description']").value.trim(),slug:document.querySelector("input[name='slug']").value.trim(),content:document.querySelector("textarea[name='content']").value.trim(),status:document.querySelector("select[name='post-status']").value.trim()}}function T(n){document.querySelector("input[name='title']").value=n.title||"",document.querySelector("textarea[name='description']").value=n.description||"",document.querySelector("select[name='post-status']").value=n.status||"",document.querySelector("input[name='slug']").value=n.slug||"",document.querySelector("textarea[name='content']").value=n.content||""}function E({title:n,description:a,content:i,slug:K,status:Q}){return!n||!a||!i||!K||!Q?(u("Please fill out all required fields.","error"),!1):!0}})});var Y=d(()=>{window.location.pathname==="/dashboard"&&document.addEventListener("DOMContentLoaded",()=>{fetch("/common/v1/links",{method:"GET",headers:{"Content-Type":"application/json"}}).then(e=>e.json()).then(e=>{document.querySelector(".link-count").innerHTML=e.length}).catch(e=>{console.error("Error fetching links:",e)})})});var W=d(()=>{document.addEventListener("DOMContentLoaded",function(){let e=document.getElementById("modal"),t=document.getElementsByClassName("modal-close"),o=document.getElementsByClassName("modal-open");Array.from(t).forEach(r=>{r.addEventListener("click",()=>{e.classList.add("hidden"),e.classList.remove("flex")})}),Array.from(o).forEach(r=>{r.addEventListener("click",()=>{e.classList.add("flex"),e.classList.remove("hidden")})}),e.addEventListener("click",r=>{r.target===e&&(e.classList.add("hidden"),e.classList.remove("flex"))})})});var z=d(()=>{window.location.pathname==="/admin/users"&&document.addEventListener("DOMContentLoaded",function(){let e=fetch("/common/v1/users",{method:"GET",headers:{"Content-Type":"application/json"}}).then(t=>{if(t.ok)return t.json()}).then(t=>{t.forEach(o=>{let r=document.createElement("tr");r.id=`user-${o.id}`,r.classList.add("w-full","flex","justify-between","mb-2"),r.innerHTML=`
						<td class="w-1/3">${o.username}</td>
						<td class="w-1/3">${o.email}</td>
						<td class="w-1/3">${o.role}</td>
					`,document.getElementById("users-table").appendChild(r)})}).catch(t=>{console.error("Error fetching users:",t)})})});N();j();I();M();U();R();F();J();H();_();G();Y();W();p();z();})();
>>>>>>> 4e2223c4c4bd5c0a3520584751f014fc690ea5bd
