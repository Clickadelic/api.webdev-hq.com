(()=>{var k=Object.defineProperty;var H=Object.getOwnPropertyDescriptor;var Y=Object.getOwnPropertyNames;var W=Object.prototype.hasOwnProperty;var d=(e,t)=>()=>(e&&(t=e(e=0)),t);var z=(e,t)=>{for(var n in t)k(e,n,{get:t[n],enumerable:!0})},K=(e,t,n,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let a of Y(t))!W.call(e,a)&&a!==n&&k(e,a,{get:()=>t[a],enumerable:!(o=H(t,a))||o.enumerable});return e};var i=e=>K(k({},"__esModule",{value:!0}),e);var Q={};var O=d(()=>{window.location.pathname==="/account"&&document.addEventListener("DOMContentLoaded",function(){let e=document.querySelectorAll("[data-tab]"),t=document.querySelectorAll("[data-content]");e.forEach(n=>{n.addEventListener("click",()=>{e.forEach(a=>a.classList.remove("border-b-2","border-blue-500","text-mantis-primary")),t.forEach(a=>a.classList.add("hidden")),n.classList.add("border-b-2","border-mantis-primary","text-mantis-primary");let o=n.getAttribute("data-tab");document.querySelector(`[data-content="${o}"]`).classList.remove("hidden")})}),e[0].click()})});var V={};var P=d(()=>{document.addEventListener("DOMContentLoaded",()=>{let e=document.getElementsByClassName("dropdown-btn"),t=document.getElementsByClassName("dropdown-menu");for(let n=0;n<e.length;n++)e[n].addEventListener("click",o=>{o.stopPropagation(),t[n].classList.toggle("hidden");let a=e[n].getAttribute("aria-expanded")==="true";e[n].setAttribute("aria-expanded",String(!a))});document.addEventListener("click",()=>{for(let n=0;n<t.length;n++)t[n].classList.contains("hidden")||(t[n].classList.add("hidden"),e[n].setAttribute("aria-expanded","false"))})})});var m={};z(m,{toast:()=>X});function X(e,t){g||(g=document.createElement("div"),g.classList.add("toastContain"),document.body.appendChild(g));let n=document.createElement("div");n.classList.add("toast",t),n.innerText=e,g.prepend(n),setTimeout(()=>n.classList.add("open"),10),setTimeout(()=>n.classList.remove("open"),3e3),setTimeout(()=>g.removeChild(n),3500)}var g,f=d(()=>{});var ee={};var y,Z,I=d(()=>{({toast:y}=(f(),i(m)));window.location.pathname==="/newsletter"&&document.addEventListener("DOMContentLoaded",()=>{document.getElementsByTagName("form")[0].addEventListener("submit",e=>{Z(e)})});if(window.location.pathname==="/newsletter-confirm"){let e=new URLSearchParams(window.location.search);if(e.get("token")){let t=e.get("token");fetch("/common/v1/newsletter/confirm",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:t})})}}Z=async e=>{e.preventDefault();let t=document.querySelector("input[name='name']").value,n=document.querySelector("input[name='email']").value,o=document.querySelector("input[name='agreed-to-subscription']").checked;if(!t||!n||!o){y("Please fill out all fields.","error"),document.querySelector("input[name='name']").focus();return}let a={name:t,email:n,agreedToSubscription:o};try{await fetch("/common/v1/newsletter/subscribe",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}).then(c=>{c.status===409&&y("E-mail is already subscribed.","error"),c.ok?(document.querySelector("input[name='name']").value="",document.querySelector("input[name='email']").value="",document.querySelector("input[name='agreed-to-subscription']").checked=!1,y("Subscribtion successful.","success")):y("Subscribtion failed.","error")})}catch(c){console.log(c)}}});var te={};var p,B=d(()=>{({toast:p}=(f(),i(m)));if(window.location.pathname==="/auth/register"){document.addEventListener("DOMContentLoaded",()=>{document.getElementsByTagName("form")[0].addEventListener("submit",t=>{e(t)})});let e=async t=>{t.preventDefault();let n=document.querySelector("input[name='username']").value,o=document.querySelector("input[name='email']").value,a=document.querySelector("input[name='password']").value,c=document.querySelector("input[name='password-repeat']").value,L=document.querySelector("input[name='agreed-to-terms']").checked;if(!n||!o||!a||!c||!L){p("Please fill out all fields.","error");return}if(a!==c){p("Passwords do not match.","error");return}let v={username:n,email:o,password:a,passwordRepeat:c,agreedToTerms:L};try{let h=await fetch("/common/v1/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(v)}),S=await h.json();if(!h.ok){let E=S.message||"An unknown error occurred.";p(E,"error");return}p("Please confirm your e-mail.","success"),document.querySelector("input[name='username']").value="",document.querySelector("input[name='email']").value="",document.querySelector("input[name='password']").value="",document.querySelector("input[name='password-repeat']").value="",document.querySelector("input[name='agreed-to-terms']").checked=!1}catch(h){console.error("Fetch error:",h),p("Network error or unhandled exception.")}}}window.location.pathname==="/auth/confirm"&&document.addEventListener("DOMContentLoaded",()=>{let t=new URLSearchParams(window.location.search).get("token"),n=document.getElementById("message-box");t?fetch("/common/v1/auth/confirm?token="+encodeURIComponent(t),{method:"GET",headers:{"Content-Type":"application/json"}}).then(o=>o.json()).then(o=>{console.log("Response data is",o.message),p(o.message,"Account has been verified."),n.innerHTML=o.message}).catch(o=>{console.error("Error confirming email:",o),p("Something went wrong.","error")}):p("Token missing.","error")})});var ne={};var x,N=d(()=>{({toast:x}=(f(),i(m)));window.location.pathname==="/auth/confirm"&&document.addEventListener("DOMContentLoaded",()=>{let e=window.location.search.split("=")[1];console.log(e),e&&fetch("/common/v1/auth/confirm?token="+e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:e})}).then(t=>t.json()).then(t=>{t.message?x(t.message,"success"):x("Something went wrong.","error")}).catch(t=>{console.error("Error fetching links:",t)})})});var re={};var b,oe,j=d(()=>{({toast:b}=(f(),i(m)));window.location.pathname==="/auth/login"&&document.addEventListener("DOMContentLoaded",()=>{document.getElementsByTagName("form")[0].addEventListener("submit",e=>{oe(e)})});oe=async e=>{e.preventDefault();let t=document.querySelector("input[name='email']").value,n=document.querySelector("input[name='password']").value;if(!t||!n){b("Please fill out all fields.","error"),document.querySelector("input[name='email']").focus();return}let o={email:t,password:n};try{let a=await fetch("/common/v1/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}),c=await a.json();a.ok?(localStorage.setItem("token",c.token),b("Login successful.","success"),document.querySelector("input[name='email']").value="",document.querySelector("input[name='password']").value="",setTimeout(()=>window.location.href=`${process.env.SUCCESSFUL_LOGIN_REDIRECT}`,2e3)):(b(c.message||"Login failed.","error"),document.querySelector("input[name='email']").focus())}catch(a){console.log(a)}}});var ae={};var A=d(()=>{(window.location.pathname===localStorage.getItem("token")||window.location.pathname!=="/newsletter"||window.location.pathname!=="/auth/confirm")&&document.addEventListener("DOMContentLoaded",()=>{document.getElementById("logout-btn")&&document.getElementById("logout-btn").addEventListener("click",t=>{t.stopPropagation(),fetch("/common/v1/auth/logout",{method:"POST"}).then(n=>{n.ok&&(window.location.href="/")})})})});var ie={};var w,se,M=d(()=>{({toast:w}=(f(),i(m)));window.location.pathname==="/auth/reset-password"&&document.addEventListener("DOMContentLoaded",()=>{document.getElementsByTagName("form")[0].addEventListener("submit",e=>{se(e)})});se=async e=>{e.preventDefault();let t=e.target,n=document.querySelector("input[name='email']").value;if(!n){w("Please fill out all fields.","error");return}let o={email:n};try{(await fetch("/common/v1/auth/reset-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)})).ok?(document.querySelector("input[name='email']").value="",w("Password reset email sent.","success")):w("Password reset failed.","error")}catch(a){w("Something went wrong.","error"),console.log(a)}}});var ce={};var l,q,T,R=d(()=>{({toast:l}=(f(),i(m))),q=!1,T=null;document.addEventListener("DOMContentLoaded",()=>{if(window.location.pathname!=="/links")return;let e=document.getElementById("link-form"),t=document.getElementsByClassName("edit-link-btn"),n=document.getElementsByClassName("delete-link-btn"),o=document.getElementById("create-link-btn-text"),a=document.getElementById("update-link-btn-text"),c=document.getElementById("modal");e.addEventListener("submit",r=>{r.preventDefault(),q?S():v()}),Array.from(t).forEach(r=>{r.addEventListener("click",s=>{s.stopPropagation();let u=r.getAttribute("data-link-id");h(u)})}),Array.from(n).forEach(r=>{r.addEventListener("click",s=>{s.stopPropagation();let u=r.getAttribute("data-link-id");E(u)})});function L(){q=!1,T=null,o.classList.remove("hidden"),a.classList.add("hidden")}async function v(){let r=D();if(C(r))try{(await fetch("/common/v1/links",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)})).ok?(l("Link created.","success"),window.location.href="/links"):l("Link creation failed.","error")}catch(s){l("Something went wrong.","error"),console.error(s)}}async function h(r){if(!r){l("Link ID is missing.","error");return}q=!0,T=r,o.classList.add("hidden"),a.classList.remove("hidden"),c.classList.remove("hidden"),c.classList.add("flex");try{let s=await fetch(`/common/v1/links/${r}`),u=await s.json();if(!s.ok){l("Link not found.","error");return}_(u)}catch(s){console.error("Something went wrong:",s),l("Something went wrong.","error")}}async function S(){let r=D();if(r.id=T,!!C(r))try{let s=await fetch(`/common/v1/links/${r.id}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(s.ok)l("Link updated.","success"),window.location.href="/links";else{let u=await s.json();console.log(u),l("Update failed.","error")}}catch(s){l("Something went wrong.","error"),console.error(s)}}async function E(r){let s=document.querySelector("input[name='userId']").value;try{(await fetch(`/common/v1/links/${r}`,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:s})})).ok?(document.querySelector(`#link-${r}`).remove(),l("Link deleted.","success")):l("Deletion failed.","error")}catch(u){l("Something went wrong.","error"),console.error(u)}}function D(){return{userId:document.querySelector("input[name='userId']").value.trim(),title:document.querySelector("input[name='title']").value.trim(),url:document.querySelector("input[name='url']").value.trim(),description:document.querySelector("textarea[name='description']").value.trim(),isPublic:document.querySelector("input[name='is-public']").checked}}function _(r){document.querySelector("input[name='userId']").value=r.userId||"",document.querySelector("input[name='title']").value=r.title||"",document.querySelector("input[name='url']").value=r.url||"",document.querySelector("textarea[name='description']").value=r.description||"",document.querySelector("input[name='is-public']").checked=!!r.isPublic}function C({userId:r,title:s,url:u,description:G}){return!r||!s||!u||!G?(l("Please fill out all required fields.","error"),!1):!0}})});var de={};var U=d(()=>{window.location.pathname==="/dashboard"&&document.addEventListener("DOMContentLoaded",()=>{fetch("/common/v1/links",{method:"GET",headers:{"Content-Type":"application/json"}}).then(e=>e.json()).then(e=>{document.querySelector(".link-count").innerHTML=e.length}).catch(e=>{console.error("Error fetching links:",e)})})});var le={};var $=d(()=>{document.addEventListener("DOMContentLoaded",function(){let e=document.getElementById("modal"),t=document.getElementsByClassName("modal-close"),n=document.getElementsByClassName("modal-open");Array.from(t).forEach(o=>{o.addEventListener("click",()=>{e.classList.add("hidden"),e.classList.remove("flex")})}),Array.from(n).forEach(o=>{o.addEventListener("click",()=>{e.classList.add("flex"),e.classList.remove("hidden")})}),e.addEventListener("click",o=>{o.target===e&&(e.classList.add("hidden"),e.classList.remove("flex"))})})});var me={};function ue(){let e=document.getElementById("main-sidebar");document.getElementById("logo-text").classList.contains("lg:flex")&&e.classList.remove("lg:flex"),e.classList.contains("md:w-64")?(e.classList.remove("md:w-64"),e.classList.add("md:w-16")):e.classList.add("hidden")}var J=d(()=>{document.getElementById("btn-sidebar-toggle")&&document.getElementById("btn-sidebar-toggle").addEventListener("click",()=>{ue()})});var fe={};var F=d(()=>{window.location.pathname==="/admin/users"&&document.addEventListener("DOMContentLoaded",function(){let e=fetch("/common/v1/users",{method:"GET",headers:{"Content-Type":"application/json"}}).then(t=>{if(t.ok)return t.json()}).then(t=>{t.forEach(n=>{let o=document.createElement("tr");o.id=`user-${n.id}`,o.classList.add("w-full","flex","justify-between","mb-2"),o.innerHTML=`
						<td class="w-1/3">${n.username}</td>
						<td class="w-1/3">${n.email}</td>
						<td class="w-1/3">${n.role}</td>
					`,document.getElementById("users-table").appendChild(o)})}).catch(t=>{console.error("Error fetching users:",t)})})});O();P();I();B();N();j();A();M();R();U();$();J();f();F();})();
//# sourceMappingURL=scripts.min.js.map
