(()=>{var T=Object.defineProperty;var Q=Object.getOwnPropertyDescriptor;var V=Object.getOwnPropertyNames;var X=Object.prototype.hasOwnProperty;var Z=(e,t)=>()=>(e&&(t=e(e=0)),t);var d=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),ee=(e,t)=>{for(var o in t)T(e,o,{get:t[o],enumerable:!0})},te=(e,t,o,s)=>{if(t&&typeof t=="object"||typeof t=="function")for(let a of V(t))!X.call(e,a)&&a!==o&&T(e,a,{get:()=>t[a],enumerable:!(s=Q(t,a))||s.enumerable});return e};var h=e=>te(T({},"__esModule",{value:!0}),e);var I=d(()=>{window.location.pathname==="/account"&&document.addEventListener("DOMContentLoaded",function(){let e=document.querySelectorAll("[data-tab]"),t=document.querySelectorAll("[data-content]");e.forEach(o=>{o.addEventListener("click",()=>{e.forEach(a=>a.classList.remove("border-b-2","border-blue-500","text-mantis-primary")),t.forEach(a=>a.classList.add("hidden")),o.classList.add("border-b-2","border-mantis-primary","text-mantis-primary");let s=o.getAttribute("data-tab");document.querySelector(`[data-content="${s}"]`).classList.remove("hidden")})}),e[0].click()})});var N=d(()=>{document.addEventListener("DOMContentLoaded",()=>{let e=document.getElementsByClassName("dropdown-btn"),t=document.getElementsByClassName("dropdown-menu");for(let o=0;o<e.length;o++)e[o].addEventListener("click",s=>{s.stopPropagation(),t[o].classList.toggle("hidden");let a=e[o].getAttribute("aria-expanded")==="true";e[o].setAttribute("aria-expanded",String(!a))});document.addEventListener("click",()=>{for(let o=0;o<t.length;o++)t[o].classList.contains("hidden")||(t[o].classList.add("hidden"),e[o].setAttribute("aria-expanded","false"))})})});var m={};ee(m,{toast:()=>ne});function ne(e,t){y||(y=document.createElement("div"),y.classList.add("toastContain"),document.body.appendChild(y));let o=document.createElement("div");o.classList.add("toast",t),o.innerText=e,y.prepend(o),setTimeout(()=>o.classList.add("open"),10),setTimeout(()=>o.classList.remove("open"),3e3),setTimeout(()=>y.removeChild(o),3500)}var y,p=Z(()=>{});var j=d(()=>{var{toast:b}=(p(),h(m));window.location.pathname==="/newsletter"&&document.addEventListener("DOMContentLoaded",()=>{document.getElementsByTagName("form")[0].addEventListener("submit",e=>{oe(e)})});if(window.location.pathname==="/newsletter-confirm"){let e=new URLSearchParams(window.location.search);if(e.get("token")){let t=e.get("token");fetch("/common/v1/newsletter/confirm",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:t})})}}var oe=async e=>{e.preventDefault();let t=document.querySelector("input[name='name']").value,o=document.querySelector("input[name='email']").value,s=document.querySelector("input[name='agreed-to-subscription']").checked;if(!t||!o||!s){b("Please fill out all fields.","error"),document.querySelector("input[name='name']").focus();return}let a={name:t,email:o,agreedToSubscription:s};try{await fetch("/common/v1/newsletter/subscribe",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}).then(i=>{i.status===409&&b("E-mail is already subscribed.","error"),i.ok?(document.querySelector("input[name='name']").value="",document.querySelector("input[name='email']").value="",document.querySelector("input[name='agreed-to-subscription']").checked=!1,b("Subscribtion successful.","success")):b("Subscribtion failed.","error")})}catch(i){console.log(i)}}});var A=d(()=>{var{toast:g}=(p(),h(m));if(window.location.pathname==="/auth/register"){document.addEventListener("DOMContentLoaded",()=>{document.getElementsByTagName("form")[0].addEventListener("submit",t=>{e(t)})});let e=async t=>{t.preventDefault();let o=document.querySelector("input[name='username']").value,s=document.querySelector("input[name='email']").value,a=document.querySelector("input[name='password']").value,i=document.querySelector("input[name='password-repeat']").value,E=document.querySelector("input[name='agreed-to-terms']").checked;if(!o||!s||!a||!i||!E){g("Please fill out all fields.","error");return}if(a!==i){g("Passwords do not match.","error");return}let w={username:o,email:s,password:a,passwordRepeat:i,agreedToTerms:E};try{let f=await fetch("/common/v1/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(w)}),v=await f.json();if(!f.ok){let k=v.message||"An unknown error occurred.";g(k,"error");return}g("Please confirm your e-mail.","success"),document.querySelector("input[name='username']").value="",document.querySelector("input[name='email']").value="",document.querySelector("input[name='password']").value="",document.querySelector("input[name='password-repeat']").value="",document.querySelector("input[name='agreed-to-terms']").checked=!1}catch(f){console.error("Fetch error:",f),g("Network error or unhandled exception.")}}}window.location.pathname==="/auth/confirm"&&document.addEventListener("DOMContentLoaded",()=>{let t=new URLSearchParams(window.location.search).get("token"),o=document.getElementById("message-box");t?fetch("/common/v1/auth/confirm?token="+encodeURIComponent(t),{method:"GET",headers:{"Content-Type":"application/json"}}).then(s=>s.json()).then(s=>{g(s.message,"Account has been verified."),o.innerHTML=s.message}).catch(s=>{console.error("Error confirming email:",s),g("Something went wrong.","error")}):g("Token missing.","error")})});var U=d(()=>{var{toast:M}=(p(),h(m));window.location.pathname==="/auth/confirm"&&document.addEventListener("DOMContentLoaded",()=>{let e=window.location.search.split("=")[1];e&&fetch("/common/v1/auth/confirm?token="+e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:e})}).then(t=>t.json()).then(t=>{t.message?M(t.message,"success"):M("Something went wrong.","error")}).catch(t=>{console.error("Error fetching links:",t)})})});var $=d(()=>{var{toast:P}=(p(),h(m));window.location.pathname==="/auth/login"&&document.addEventListener("DOMContentLoaded",()=>{document.getElementsByTagName("form")[0].addEventListener("submit",e=>{re(e)})});var re=async e=>{e.preventDefault();let t=document.querySelector("input[name='email']").value,o=document.querySelector("input[name='password']").value;if(!t||!o){P("Please fill out all fields.","error"),document.querySelector("input[name='email']").focus();return}let s={email:t,password:o};try{let a=await fetch("/common/v1/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}),i=await a.json();a.ok?(localStorage.setItem("token",i.token),P("Login successful.","success"),document.querySelector("input[name='email']").value="",document.querySelector("input[name='password']").value="",setTimeout(()=>window.location.href="/",1500)):(P(i.message||"Login failed.","error"),document.querySelector("input[name='email']").focus())}catch(a){console.log(a)}}});var R=d(()=>{(window.location.pathname===localStorage.getItem("token")||window.location.pathname!=="/newsletter"||window.location.pathname!=="/auth/confirm")&&document.addEventListener("DOMContentLoaded",()=>{document.getElementById("logout-btn")&&document.getElementById("logout-btn").addEventListener("click",t=>{t.stopPropagation(),fetch("/common/v1/auth/logout",{method:"POST"}).then(o=>{o.ok&&(window.location.href="/")})})})});var F=d(()=>{var{toast:q}=(p(),h(m));window.location.pathname==="/auth/reset-password"&&document.addEventListener("DOMContentLoaded",()=>{document.getElementsByTagName("form")[0].addEventListener("submit",e=>{se(e)})});var se=async e=>{e.preventDefault();let t=e.target,o=document.querySelector("input[name='email']").value;if(!o){q("Please fill out all fields.","error");return}let s={email:o};try{(await fetch("/common/v1/auth/reset-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)})).ok?(document.querySelector("input[name='email']").value="",q("Password reset email sent.","success")):q("Password reset failed.","error")}catch(a){q("Something went wrong.","error"),console.log(a)}}});var J=d(()=>{var{toast:l}=(p(),h(m)),C=!1,B=null;document.addEventListener("DOMContentLoaded",()=>{if(window.location.pathname!=="/links")return;let e=document.getElementById("link-form"),t=document.getElementsByClassName("edit-link-btn"),o=document.getElementsByClassName("delete-link-btn"),s=document.getElementById("create-link-btn-text"),a=document.getElementById("update-link-btn-text"),i=document.getElementById("modal");e.addEventListener("submit",n=>{n.preventDefault(),C?v():w()}),Array.from(t).forEach(n=>{n.addEventListener("click",r=>{r.stopPropagation();let c=n.getAttribute("data-link-id");f(c)})}),Array.from(o).forEach(n=>{n.addEventListener("click",r=>{r.stopPropagation();let c=n.getAttribute("data-link-id");k(c)})});function E(){C=!1,B=null,s.classList.remove("hidden"),a.classList.add("hidden")}async function w(){let n=L();if(S(n))try{(await fetch("/common/v1/links",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)})).ok?(l("Link created.","success"),window.location.href="/links"):l("Link creation failed.","error")}catch(r){l("Something went wrong.","error"),console.error(r)}}async function f(n){if(!n){l("Link ID is missing.","error");return}C=!0,B=n,s.classList.add("hidden"),a.classList.remove("hidden"),i.classList.remove("hidden"),i.classList.add("flex");try{let r=await fetch(`/common/v1/links/${n}`),c=await r.json();if(!r.ok){l("Link not found.","error");return}D(c)}catch(r){console.error("Something went wrong:",r),l("Something went wrong.","error")}}async function v(){let n=L();if(n.id=B,!!S(n))try{(await fetch(`/common/v1/links/${n.id}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)})).ok?(l("Link updated.","success"),window.location.href="/links"):l("Update failed.","error")}catch(r){l("Something went wrong.","error"),console.error(r)}}async function k(n){try{(await fetch(`/common/v1/links/${n}`,{method:"DELETE",headers:{"Content-Type":"application/json"}})).ok?(document.querySelector(`#link-${n}`).remove(),l("Link deleted.","success")):l("Deletion failed.","error")}catch(r){l("Something went wrong.","error"),console.error(r)}}function L(){return{title:document.querySelector("input[name='title']").value.trim(),url:document.querySelector("input[name='url']").value.trim(),description:document.querySelector("textarea[name='description']").value.trim(),isPublic:document.querySelector("input[name='is-public']").checked}}function D(n){document.querySelector("input[name='title']").value=n.title||"",document.querySelector("input[name='url']").value=n.url||"",document.querySelector("textarea[name='description']").value=n.description||"",document.querySelector("input[name='is-public']").checked=!!n.isPublic}function S({title:n,url:r,description:c}){return!n||!r||!c?(l("Please fill out all required fields.","error"),!1):!0}})});var H=d(()=>{var{toast:u}=(p(),h(m)),x=!1,O=null;document.addEventListener("DOMContentLoaded",()=>{if(window.location.pathname!=="/posts/create")return;let e=document.getElementById("post-form"),t=document.getElementsByClassName("edit-post-btn"),o=document.getElementsByClassName("delete-post-btn"),s=document.getElementById("create-post-btn-text"),a=document.getElementById("update-post-btn-text"),i=document.getElementById("modal");e.addEventListener("submit",n=>{n.preventDefault(),x?v():w()}),Array.from(t).forEach(n=>{n.addEventListener("click",r=>{r.stopPropagation();let c=n.getAttribute("data-post-id");f(id)})}),Array.from(o).forEach(n=>{n.addEventListener("click",r=>{r.stopPropagation();let c=n.getAttribute("data-post-id");handleLinkDeletion(c)})});function E(){x=!1,O=null,s.classList.remove("hidden"),a.classList.add("hidden")}async function w(){let n=L();if(S(n))try{(await fetch("/common/v1/posts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)})).ok?(u("Post created.","success"),setTimeout(()=>{window.location.href="/posts"},1500)):u("Post creation failed.","error")}catch(r){u("Something went wrong.","error"),console.error(r)}}async function f(n){if(!n){u("Post ID is missing.","error");return}x=!0,O=n,s.classList.add("hidden"),a.classList.remove("hidden"),i.classList.remove("hidden"),i.classList.add("flex");try{let r=await fetch(`/common/v1/posts/${n}`),c=await r.json();if(!r.ok){u("Post not found.","error");return}D(c)}catch(r){console.error("Something went wrong:",r),u("Something went wrong.","error")}}async function v(){let n=L();if(n.id=O,!!S(n))try{let r=await fetch(`/common/v1/posts/${n.id}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(r.ok)u("Post updated.","success"),window.location.href="/posts";else{let c=await r.json();console.log(c),u("Update failed.","error")}}catch(r){u("Something went wrong.","error"),console.error(r)}}async function k(n){try{(await fetch(`/common/v1/posts/${n}`,{method:"DELETE",headers:{"Content-Type":"application/json"}})).ok?(document.querySelector(`#post-${n}`).remove(),u("Post deleted.","success")):u("Deletion failed.","error")}catch(r){u("Something went wrong.","error"),console.error(r)}}function L(){return{title:document.querySelector("input[name='title']").value.trim(),description:document.querySelector("textarea[name='description']").value.trim(),slug:document.querySelector("input[name='slug']").value.trim(),content:document.querySelector("textarea[name='content']").value.trim(),status:document.querySelector("select[name='post-status']").value.trim()}}function D(n){document.querySelector("input[name='title']").value=n.title||"",document.querySelector("textarea[name='description']").value=n.description||"",document.querySelector("select[name='post-status']").value=n.status||"",document.querySelector("input[name='slug']").value=n.url||"",document.querySelector("textarea[name='content']").value=n.content||""}function S({title:n,description:r,content:c,slug:z,status:K}){return!n||!r||!c||!z||!K?(u("Please fill out all required fields.","error"),!1):!0}})});var _=d(()=>{window.location.pathname==="/dashboard"&&document.addEventListener("DOMContentLoaded",()=>{fetch("/common/v1/links",{method:"GET",headers:{"Content-Type":"application/json"}}).then(e=>e.json()).then(e=>{document.querySelector(".link-count").innerHTML=e.length}).catch(e=>{console.error("Error fetching links:",e)})})});var G=d(()=>{document.addEventListener("DOMContentLoaded",function(){let e=document.getElementById("modal"),t=document.getElementsByClassName("modal-close"),o=document.getElementsByClassName("modal-open");Array.from(t).forEach(s=>{s.addEventListener("click",()=>{e.classList.add("hidden"),e.classList.remove("flex")})}),Array.from(o).forEach(s=>{s.addEventListener("click",()=>{e.classList.add("flex"),e.classList.remove("hidden")})}),e.addEventListener("click",s=>{s.target===e&&(e.classList.add("hidden"),e.classList.remove("flex"))})})});var Y=d(()=>{document.getElementById("btn-sidebar-toggle")&&document.getElementById("btn-sidebar-toggle").addEventListener("click",()=>{ae()});function ae(){let e=document.getElementById("main-sidebar");document.getElementById("logo-text").classList.contains("lg:flex")&&e.classList.remove("lg:flex"),e.classList.contains("md:w-64")?(e.classList.remove("md:w-64"),e.classList.add("md:w-16")):e.classList.add("hidden")}});var W=d(()=>{window.location.pathname==="/admin/users"&&document.addEventListener("DOMContentLoaded",function(){let e=fetch("/common/v1/users",{method:"GET",headers:{"Content-Type":"application/json"}}).then(t=>{if(t.ok)return t.json()}).then(t=>{t.forEach(o=>{let s=document.createElement("tr");s.id=`user-${o.id}`,s.classList.add("w-full","flex","justify-between","mb-2"),s.innerHTML=`
						<td class="w-1/3">${o.username}</td>
						<td class="w-1/3">${o.email}</td>
						<td class="w-1/3">${o.role}</td>
					`,document.getElementById("users-table").appendChild(s)})}).catch(t=>{console.error("Error fetching users:",t)})})});I();N();j();A();U();$();R();F();J();H();_();G();Y();p();W();})();
