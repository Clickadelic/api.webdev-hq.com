(()=>{var w=Object.defineProperty;var M=Object.getOwnPropertyDescriptor;var R=Object.getOwnPropertyNames;var U=Object.prototype.hasOwnProperty;var $=(e,t)=>()=>(e&&(t=e(e=0)),t);var d=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),J=(e,t)=>{for(var n in t)w(e,n,{get:t[n],enumerable:!0})},F=(e,t,n,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of R(t))!U.call(e,r)&&r!==n&&w(e,r,{get:()=>t[r],enumerable:!(o=M(t,r))||o.enumerable});return e};var p=e=>F(w({},"__esModule",{value:!0}),e);var L=d(()=>{window.location.pathname==="/account"&&document.addEventListener("DOMContentLoaded",function(){let e=document.querySelectorAll("[data-tab]"),t=document.querySelectorAll("[data-content]");e.forEach(n=>{n.addEventListener("click",()=>{e.forEach(r=>r.classList.remove("border-b-2","border-blue-500","text-mantis-primary")),t.forEach(r=>r.classList.add("hidden")),n.classList.add("border-b-2","border-mantis-primary","text-mantis-primary");let o=n.getAttribute("data-tab");document.querySelector(`[data-content="${o}"]`).classList.remove("hidden")})}),e[0].click()})});var S=d(()=>{document.addEventListener("DOMContentLoaded",()=>{let e=document.getElementsByClassName("dropdown-btn"),t=document.getElementsByClassName("dropdown-menu");for(let n=0;n<e.length;n++)e[n].addEventListener("click",o=>{o.stopPropagation(),t[n].classList.toggle("hidden");let r=e[n].getAttribute("aria-expanded")==="true";e[n].setAttribute("aria-expanded",String(!r))});document.addEventListener("click",()=>{for(let n=0;n<t.length;n++)t[n].classList.contains("hidden")||(t[n].classList.add("hidden"),e[n].setAttribute("aria-expanded","false"))})})});var l={};J(l,{toast:()=>_});function _(e,t){h||(h=document.createElement("div"),h.classList.add("toastContain"),document.body.appendChild(h));let n=document.createElement("div");n.classList.add("toast",t),n.innerText=e,h.prepend(n),setTimeout(()=>n.classList.add("open"),10),setTimeout(()=>n.classList.remove("open"),3e3),setTimeout(()=>h.removeChild(n),3500)}var h,u=$(()=>{});var k=d(()=>{var{toast:y}=(u(),p(l));window.location.pathname==="/newsletter"&&document.addEventListener("DOMContentLoaded",()=>{document.getElementsByTagName("form")[0].addEventListener("submit",e=>{H(e)})});if(window.location.pathname==="/newsletter-confirm"){let e=new URLSearchParams(window.location.search);if(e.get("token")){let t=e.get("token");fetch("/common/v1/newsletter/confirm",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:t})})}}var H=async e=>{e.preventDefault();let t=document.querySelector("input[name='name']").value,n=document.querySelector("input[name='email']").value,o=document.querySelector("input[name='agreed-to-subscription']").checked;if(!t||!n||!o){y("Please fill out all fields.","error"),document.querySelector("input[name='name']").focus();return}let r={name:t,email:n,agreedToSubscription:o};try{await fetch("/common/v1/newsletter/subscribe",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}).then(a=>{a.status===409&&y("E-mail is already subscribed.","error"),a.ok?(document.querySelector("input[name='name']").value="",document.querySelector("input[name='email']").value="",document.querySelector("input[name='agreed-to-subscription']").checked=!1,y("Subscribtion successful.","success")):y("Subscribtion failed.","error")})}catch(a){console.log(a)}}});var E=d(()=>{var{toast:f}=(u(),p(l));if(window.location.pathname==="/auth/register"){document.addEventListener("DOMContentLoaded",()=>{document.getElementsByTagName("form")[0].addEventListener("submit",t=>{e(t)})});let e=async t=>{t.preventDefault();let n=document.querySelector("input[name='username']").value,o=document.querySelector("input[name='email']").value,r=document.querySelector("input[name='password']").value,a=document.querySelector("input[name='password-repeat']").value,i=document.querySelector("input[name='agreed-to-terms']").checked;if(!n||!o||!r||!a||!i){f("Please fill out all fields.","error");return}if(r!==a){f("Passwords do not match.","error");return}let c={username:n,email:o,password:r,passwordRepeat:a,agreedToTerms:i};try{let m=await fetch("/common/v1/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)}),I=await m.json();if(!m.ok){let A=I.message||"An unknown error occurred.";f(A,"error");return}f("Please confirm your e-mail.","success"),document.querySelector("input[name='username']").value="",document.querySelector("input[name='email']").value="",document.querySelector("input[name='password']").value="",document.querySelector("input[name='password-repeat']").value="",document.querySelector("input[name='agreed-to-terms']").checked=!1}catch(m){console.error("Fetch error:",m),f("Network error or unhandled exception.")}}}});var b=d(()=>{var{toast:q}=(u(),p(l));window.location.pathname==="/auth/confirm"&&document.addEventListener("DOMContentLoaded",()=>{let e=window.location.search.split("=")[1];console.log(e),e&&fetch("/common/v1/auth/confirm?token="+e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:e})}).then(t=>t.json()).then(t=>{t.message?q(t.message,"success"):q("Something went wrong.","error")}).catch(t=>{console.error("Error fetching links:",t)})})});var T=d(()=>{var{toast:v}=(u(),p(l));window.location.pathname==="/auth/login"&&document.addEventListener("DOMContentLoaded",()=>{document.getElementsByTagName("form")[0].addEventListener("submit",e=>{Y(e)})});var Y=async e=>{e.preventDefault();let t=document.querySelector("input[name='email']").value,n=document.querySelector("input[name='password']").value;if(!t||!n){v("Please fill out all fields.","error"),document.querySelector("input[name='email']").focus();return}let o={email:t,password:n};try{let r=await fetch("/common/v1/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}),a=await r.json();r.ok?(localStorage.setItem("token",a.token),v("Login successful.","success"),document.querySelector("input[name='email']").value="",document.querySelector("input[name='password']").value="",setTimeout(()=>window.location.href="/dashboard",2e3)):(v(a.message||"Login failed.","error"),document.querySelector("input[name='email']").focus())}catch(r){console.log(r)}}});var D=d(()=>{(window.location.pathname===localStorage.getItem("token")||window.location.pathname!=="/newsletter")&&document.addEventListener("DOMContentLoaded",()=>{document.getElementById("logout-btn").addEventListener("click",t=>{t.stopPropagation(),fetch("/common/v1/auth/logout",{method:"POST"}).then(n=>{n.ok&&(window.location.href="/")})})})});var C=d(()=>{var{toast:g}=(u(),p(l));window.location.pathname==="/auth/reset-password"&&document.addEventListener("DOMContentLoaded",()=>{document.getElementsByTagName("form")[0].addEventListener("submit",e=>{G(e)})});var G=async e=>{e.preventDefault();let t=e.target,n=document.querySelector("input[name='email']").value;if(!n){g("Please fill out all fields.","error");return}let o={email:n};try{(await fetch("/common/v1/auth/reset-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)})).ok?(document.querySelector("input[name='email']").value="",g("Password reset email sent.","success")):g("Password reset failed.","error")}catch(r){g("Something went wrong.","error"),console.log(r)}}});var B=d(()=>{var{toast:s}=(u(),p(l)),P=!1;window.location.pathname==="/links"&&document.addEventListener("DOMContentLoaded",()=>{document.getElementById("link-form").addEventListener("submit",o=>{P?O(o):z(o)});let t=document.getElementsByClassName("edit-link-btn"),n=document.getElementsByClassName("delete-link-btn");for(let o=0;o<t.length;o++)t[o].addEventListener("click",r=>{r.stopPropagation(),K(t[o].getAttribute("data-link-id"))});for(let o=0;o<n.length;o++)n[o].addEventListener("click",r=>{r.stopPropagation(),Q(n[o].getAttribute("data-link-id"))})});var z=async e=>{e.preventDefault();let t=document.querySelector("input[name='userId']").value,n=document.querySelector("input[name='title']").value,o=document.querySelector("input[name='url']").value,r=document.querySelector("input[name='is-public']").checked,a=document.querySelector("textarea[name='description']").value;if(!t||!n||!o||!a){s("Please fill out all fields.","error");return}let i={userId:t,title:n,url:o,description:a,isPublic:r};try{let c=await fetch("/common/v1/links",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}),m=await c.json();c.ok?(s("Link created.","success"),window.location.href="/links"):s("Link creation failed.","error")}catch(c){s("Something went wrong.","error"),console.error(c)}},K=async e=>{let t=document.getElementById("modal"),n=document.getElementsByTagName("form")[0],o=document.getElementById("create-link-btn-text"),r=document.getElementById("update-link-btn-text");if(o.classList.add("hidden"),r.classList.remove("hidden"),!e){s("Link ID is missing.","error");return}t.classList.remove("hidden"),t.classList.add("flex");try{let a=await fetch(`/common/v1/links/${e}`),i=await a.json();if(!a.ok){s("Link not found.","error");return}n.querySelector("input[name='userId']").value=i.title,n.querySelector("input[name='title']").value=i.title,n.querySelector("input[name='url']").value=i.url,n.querySelector("textarea[name='description']").value=i.description,n.querySelector("input[name='is-public']").checked=i.isPublic,n.addEventListener("submit",c=>{O(e)})}catch(a){console.error("Something went wrong:",a),s("Something went wrong.","error")}},O=async e=>{P=!0;let t=document.querySelector("input[name='title']").value,n=document.querySelector("input[name='url']").value,o=document.querySelector("textarea[name='description']").value,r=document.querySelector("input[name='id']").checked,a=document.querySelector("input[name='userId']").value,i={id:e,title:t,url:n,description:o,isPublic:r,userId:a};try{let c=await fetch(`/common/v1/links/${e}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}),m=await c.json();c.ok?(s("Link updated.","success"),window.location.href="/links"):(s("Update failed.","error"),console.log(m))}catch(c){s("Something went wrong.","error"),console.log(c)}},Q=async e=>{try{let t=await fetch(`/common/v1/links/${e}`,{method:"DELETE",headers:{"Content-Type":"application/json"}}),n=await t.json();t.ok?(document.querySelector(`#link-${e}`).remove(),s("Link deleted.","success")):s("Deletion failed.","error")}catch(t){s("Something went wrong.","error"),console.log(t)}}});var N=d(()=>{window.location.pathname==="/dashboard"&&document.addEventListener("DOMContentLoaded",()=>{fetch("/common/v1/links",{method:"GET",headers:{"Content-Type":"application/json"}}).then(e=>e.json()).then(e=>{document.querySelector(".link-count").innerHTML=e.length}).catch(e=>{console.error("Error fetching links:",e)})})});var j=d(()=>{document.addEventListener("DOMContentLoaded",function(){let e=document.getElementById("modal"),t=document.getElementsByClassName("modal-close"),n=document.getElementsByClassName("modal-open");Array.from(t).forEach(o=>{o.addEventListener("click",()=>{e.classList.add("hidden"),e.classList.remove("flex")})}),Array.from(n).forEach(o=>{o.addEventListener("click",()=>{e.classList.add("flex"),e.classList.remove("hidden")})}),e.addEventListener("click",o=>{o.target===e&&(e.classList.add("hidden"),e.classList.remove("flex"))})})});var x=d(()=>{window.location.pathname==="/admin/users"&&document.addEventListener("DOMContentLoaded",function(){let e=fetch("/common/v1/users",{method:"GET",headers:{"Content-Type":"application/json"}}).then(t=>{if(t.ok)return t.json()}).then(t=>{t.forEach(n=>{let o=document.createElement("tr");o.id=`user-${n.id}`,o.classList.add("w-full","flex","justify-between","mb-2"),o.innerHTML=`
						<td class="w-1/3">${n.username}</td>
						<td class="w-1/3">${n.email}</td>
						<td class="w-1/3">${n.role}</td>
					`,document.getElementById("users-table").appendChild(o)})}).catch(t=>{console.error("Error fetching users:",t)})})});L();S();k();E();b();T();D();C();B();N();j();u();x();})();
